(window["webpackJsonptwitter-followers"]=window["webpackJsonptwitter-followers"]||[]).push([[0],{16:function(e,t,r){e.exports=r(43)},21:function(e,t,r){},23:function(e,t,r){},24:function(e,t,r){},25:function(e,t,r){},43:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(14),c=r.n(o),s=(r(21),r(2)),u=r.n(s),l=r(3),i=r(4),p=(r(23),"https://knowyourfollowers.herokuapp.com");var m=function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location="".concat(p,"/sessions/connect?client=react");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"twitter-login"},a.a.createElement("button",{className:"button",type:"button",onClick:e},"Login With Twitter"))},f=(r(24),function(e){var t=e.userData,r=Math.round(t.matched/t.total*100),n="follower"+(1===t.total?"":"s"),o=r>50?"\nYou should tweet our message for activists.\n":"\nYou should tweet our message for supporters.\n",c=(r>30?"\nMESSAGE FOR ACTIVISTS HERE\n":"\nMESSAGE FOR SUPPORTERS HERE\n")+" #KYF";return a.a.createElement("div",{className:"dashboard"},a.a.createElement("p",null,"You have ",t.total," ",n,", ",r,"% of whom are Labour supporters."),a.a.createElement("p",null,o.trim()),a.a.createElement("a",{className:"button",href:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(c.trim())),target:"_blank",rel:"noreferrer noopener"},"Tweet our message"))}),w=(r(25),function(){return a.a.createElement("div",{className:"footer"},a.a.createElement("p",null,"Developed by\xa0",a.a.createElement("a",{href:"https://campaignlab.org.uk",target:"_blank",rel:"noopener noreferrer"},"CampaignLab")," for\xa0",a.a.createElement("a",{href:"https://labour.org.uk/",rel:"noopener noreferrer"},"UK Labour")))}),E=r(15),b=r.n(E),h=function(){var e=Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,b.a.get("".concat(p,"/test"),{withCredentials:!0});case 4:r=e.sent,t=r.data,e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0.response||!e.t0.response.status){e.next=15;break}if(401!==e.t0.response.status){e.next=13;break}return e.abrupt("return",null);case 13:if(429!==e.t0.response.status){e.next=15;break}throw new Error("You are being rate limited. Please try again in 15 minutes.");case 15:throw new Error(e.t0);case 16:if(t){e.next=18;break}return e.abrupt("return",null);case 18:if(!t.errors){e.next=20;break}throw new Error(t.errors.map((function(e){return e.message})).join(", "));case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();var d=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),r=t[0],o=t[1],c=Object(n.useState)(""),s=Object(i.a)(c,2),p=s[0],E=s[1],b=Object(n.useState)(null),d=Object(i.a)(b,2),v=d[0],k=d[1];return Object(n.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(""),e.prev=1,e.next=4,h();case 4:t=e.sent,k(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),E(e.t0.message);case 11:o(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"app__column app__title"},a.a.createElement("h1",null,"Know"),a.a.createElement("h1",null,"Your"),a.a.createElement("h1",null,"Followers")),a.a.createElement("div",{className:"app__column"},a.a.createElement("main",{className:"app__main"},r?a.a.createElement("p",null,"Loading..."):v?a.a.createElement(f,{userData:v}):a.a.createElement("div",null,p?a.a.createElement("p",{className:"error"},p):"",a.a.createElement("p",null,"Find out what you should tweet to your followers."),a.a.createElement(m,null))),a.a.createElement(w,null)))};c.a.render(a.a.createElement(d,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.920c3a69.chunk.js.map